language: node_js
matrix:
  include:
    - node_js: "6.0"
sudo: required
dist: trusty
addons:
  apt:
    packages:
    - nginx
    - nginx-extras
    - curl
before_script:
  - export ENV_NGINX_PATH=`pwd`
  - printenv ENV_NGINX_PATH
  #Install self signed cert
  - sudo cp ssl/server.crt /usr/local/share/ca-certificates/certificate.crt
  - sudo update-ca-certificates
script:
  - nginx -V
  - ls /usr/local/nginx
  - ls /usr/local/nginx/html
  - ls /etc/nginx
  - cp -r . /usr/local/nginx/html
  #Setup nginx
  - sudo cp .travis_nginx.conf /etc/nginx/nginx.conf
  - sudo nginx -c /etc/nginx/nginx.conf -t
  #Restart nginx
  - sudo /etc/init.d/nginx restart
  #Test http
  - curl http://localhost/
  #Test https insecure
  - curl https://localhost/ -k
  #Test https
  - curl https://localhost/
notifications:
  email: false